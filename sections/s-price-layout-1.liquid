{%- assign sell_price = 's-price-layout-1' -%}
{%- assign sid = section.id -%}
{%- assign _p = product -%}
{%- if _p == null or _p == blank -%}
  {%- assign _p = section.settings.fallback_product -%}
{%- endif -%}


{%- if _p and _p != blank -%}
  {%- assign _v = _p.selected_or_first_available_variant -%}
  {%- assign current_price = _v.price -%}
  {%- assign compare_price = _v.compare_at_price -%}
{%- endif -%}








{%- assign show_sale_state = false -%}
{%- if compare_price and current_price and compare_price > current_price -%}
  {%- assign show_sale_state = true -%}
{%- endif -%}








{%- assign badge_mode = section.settings.badge_mode -%}
{%- assign badge_text_final = '' -%}








{%- if show_sale_state -%}
  {%- assign save_amount = compare_price | minus: current_price -%}
  {%- assign save_amount_money = save_amount | money -%}
  {%- assign save_percent = save_amount | times: 100.0 | divided_by: compare_price | round: 0 -%}
  {%- assign prefix_text = section.settings.badge_prefix_text | default: 'SAVE' -%}








  {%- if badge_mode == 'auto_amount' -%}
    {%- assign badge_text_final = prefix_text | append: ' ' | append: save_amount_money -%}
  {%- elsif badge_mode == 'auto_percent' -%}
    {%- assign badge_text_final = prefix_text | append: ' ' | append: save_percent | append: '%' -%}
  {%- elsif badge_mode == 'custom' -%}
    {%- assign badge_text_final = section.settings.custom_badge_text -%}
  {%- endif -%}
{%- endif -%}








{%- style -%}
  .{{ sell_price }}--{{ sid }} {
     {% if section.settings.custom_width == 'full_width' %}
                             width: 100%;
                      {% elsif section.settings.custom_width == 'max_width' %}
                          width:100%;
                         max-width:{{ section.settings.container_max_width }}px;
                     {% else %}
                            width:max-content;
                            max-width:100%;
                {% endif %}
   {% comment %}
    {% if section.settings.full_width %}
      width: 100%;
    {% else %}
      max-width: {{ section.settings.max_width }}px;
      width: 100%;
    {% endif %}
    {% endcomment %}
    background: {{ section.settings.container_bg }};
    color: {{ section.settings.container_text }};
    border-radius: {{ section.settings.container_radius }}px;
    padding: {{ section.settings.pad_y }}px {{ section.settings.pad_x }}px;
    margin-top: {{ section.settings.margin_y }}px;
    margin-bottom: {{ section.settings.margin_y }}px;
    display: flex;
    align-items: center;
    justify-content: {% if section.settings.align_text == 'center' %}center{% elsif section.settings.align_text == 'right' %}flex-end{% else %}flex-start{% endif %};
    flex-wrap: wrap;
    gap: {{ section.settings.gap }}px;
    justify-self: {{ section.settings.hor_align_text }};
  }
  .{{ sell_price }}--{{ sid }} #mysubid{
    display: flex;
    align-items: center;
    justify-content: {% if section.settings.align_text == 'center' %}center{% elsif section.settings.align_text == 'right' %}flex-end{% else %}flex-start{% endif %};
    flex-wrap: wrap;
    gap: {{ section.settings.gap }}px;
    justify-self: {{ section.settings.hor_align_text }};
   
  }








  .{{ sell_price }}--{{ sid }} .price-group {
    display: inline-flex;
    align-items: baseline;
    gap: {{ section.settings.price_gap }}px;
    line-height: {{ section.settings.price_line_height }};
  }








  .{{ sell_price }}--{{ sid }} .sale-price {
    font-size: {{ section.settings.price_size_d }}px;
    font-weight: {{ section.settings.sale_font_weight }};
    {% if show_sale_state %}
      color: {{ section.settings.sale_color }};
    {% else %}
      color: {{ section.settings.single_price_color }};
    {% endif %}
    {% if section.settings.price_position == true %}
        order: 0;
        {% else %}
            order: 1;
    {% endif %}
    line-height: {{ section.settings.sale_line_height }};
    letter-spacing: {{ section.settings.sale_letter_spacing }}px;
  }








  .{{ sell_price }}--{{ sid }} .regular-price {
    font-size: {{ section.settings.price_size_dc }}px;
    color: {{ section.settings.reg_color }};
    text-decoration: line-through;
    opacity: {{ section.settings.opacity_regular }};
    font-weight: {{ section.settings.compare_font_weight }};
    line-height: {{ section.settings.compare_line_height }};
    letter-spacing: {{ section.settings.compare_letter_spacing }}px;
  }








  .{{ sell_price }}--{{ sid }} .badge {
    margin-top:0;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    background: {{ section.settings.badge_bg }};
    color: {{ section.settings.badge_text }};
    border-radius: {{ section.settings.badge_radius }}px;
    font-size: {{ section.settings.badge_size_d }}px;
    font-weight: {{ section.settings.badge_font_weight }};
    padding: {{ section.settings.badge_pad_y }}px {{ section.settings.badge_pad_x }}px;
    text-transform: {{ section.settings.badge_transform }};
    white-space: nowrap;
    line-height: {{ section.settings.badge_line_height }};
    letter-spacing: {{ section.settings.badge_letter_spacing }}px;
  }








  @media screen and (max-width: 767px) {
    .{{ sell_price }}--{{ sid }} {
      border-radius: {{ section.settings.container_radius_mob }}px !important;
      padding: {{ section.settings.pad_y_mob }}px {{ section.settings.pad_x_mob }}px !important;
      margin-top: {{ section.settings.margin_y_mob }}px !important;
      margin-bottom: {{ section.settings.margin_y_mob }}px !important;
      justify-content: {% if section.settings.align_text_mob == 'center' %}center{% elsif section.settings.align_text_mob == 'right' %}flex-end{% else %}flex-start{% endif %} !important;
      gap: {{ section.settings.gap_mob }}px !important;
      justify-self: {{ section.settings.hor_align_text_m }};
    }








    .{{ sell_price }}--{{ sid }} #mysubid{
      justify-content: {% if section.settings.align_text_mob == 'center' %}center{% elsif section.settings.align_text_mob == 'right' %}flex-end{% else %}flex-start{% endif %} !important;
      gap: {{ section.settings.gap_mob }}px !important;
      justify-self: {{ section.settings.hor_align_text_m }};
    }








    .{{ sell_price }}--{{ sid }} .price-group {
      gap: {{ section.settings.price_gap_mob }}px !important;
      line-height: {{ section.settings.price_line_height_mob }} !important;
    }








    .{{ sell_price }}--{{ sid }} .sale-price {
      font-size: {{ section.settings.price_size_m }}px !important;
      line-height: {{ section.settings.sale_line_height_mob }} !important;
      letter-spacing: {{ section.settings.sale_letter_spacing_mob }}px !important;
    }








    .{{ sell_price }}--{{ sid }} .regular-price {
      font-size: {{ section.settings.price_size_dcm }}px !important;
      line-height: {{ section.settings.compare_line_height_mob }} !important;
      letter-spacing: {{ section.settings.compare_letter_spacing_mob }}px !important;
    }








    .{{ sell_price }}--{{ sid }} .badge {
      font-size: {{ section.settings.badge_size_m }}px !important;
      padding: {{ section.settings.badge_pad_y_mob }}px {{ section.settings.badge_pad_x_mob }}px !important;
      line-height: {{ section.settings.badge_line_height_mob }} !important;
      letter-spacing: {{ section.settings.badge_letter_spacing_mob }}px !important;
    }
  }
{%- endstyle -%}








{% capture price_markup %}
<section class="{{ sell_price }}--{{ sid }}" id="myid">
  <div id="mysubid">
  <div class="price-group">
    {%- if current_price -%}
      <span class="sale-price" id="upsell-compare-price">{{ current_price | money }}</span>
      {%- if show_sale_state -%}
        <span class="regular-price" id="upsell-regular-price">{{ compare_price | money }}</span>
      {%- endif -%}
    {%- else -%}
      <span class="sale-price">{{ section.settings.fallback_price_text }}</span>
    {%- endif -%}
  </div>








  {%- if show_sale_state and badge_mode != 'hidden' and badge_text_final != blank -%}
    <span class="badge">{{ badge_text_final }}</span>
  {%- endif -%}
  </div>
</section>
{% endcapture %}








{%- if section.settings.custom_display -%}
  <div id="s-price-layout-1-template-{{ sid }}" style="display:none;">
    {{ price_markup }}
  </div>
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      var placeholder = document.getElementById('s-price-layout-1');
      if (placeholder && !placeholder.hasAttribute('data-loaded')) {
        placeholder.insertAdjacentHTML('afterbegin', `{{ price_markup | strip_newlines | replace: '\"', '\\\"' }}`);
        placeholder.setAttribute('data-loaded', 'true');
      }
    });


       
 document.addEventListener('variant:change', function () {
       var placeholder = document.getElementById('s-price-layout-1');
      if (placeholder && !placeholder.hasAttribute('data-loaded')) {
        placeholder.insertAdjacentHTML('afterbegin', `{{ price_markup | strip_newlines | replace: '\"', '\\\"' }}`);
        placeholder.setAttribute('data-loaded', 'true');
      }
 });


  </script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
  <script>
    (function () {
      let lastVariantId = null;








      document.body.addEventListener('click', function () {
        setTimeout(() => {
          var placeholder = document.getElementById('s-price-layout-1');
          if (placeholder && !placeholder.hasAttribute('data-loaded')) {
            placeholder.insertAdjacentHTML('afterbegin', `{{ price_markup | strip_newlines | replace: '\"', '\\\"' }}`);
            placeholder.setAttribute('data-loaded', 'true');
          }
          const input = document.querySelector('input[name="id"],select[name="id"]');
          const pickupEl = document.querySelector('pickup-availability');
          if (!input) return;








          const currentId = input.value;
       
          if (currentId && currentId !== lastVariantId) {
            lastVariantId = currentId;
            setTimeout(function () {
              $('#myid').load(location.href + ' #mysubid');
            }, 800);
          }








          const pickupId = pickupEl.dataset.variantId;
          if (pickupId && pickupId !== lastVariantId) {
           
            lastVariantId = currentId;
            setTimeout(function () {
              $('#myid').load(location.href + ' #mysubid');
            }, 800);
          }
        }, 100);
      });
    })();
  </script>
{%- else -%}
  {{ price_markup }}
{%- endif -%}








{% schema %}
{
  "name": "s-price-layout-1",
  "tag": "section",
  "settings": [
    {
      "type": "header",
      "content": "‚ùì Need help?",
      "info": "Simply click here to get support: [üí¨ Click for Support](https://selluxewebsites.com/support)"
    },
    {
      "type": "header",
      "content": "Render section as block"
    },
    {
      "type": "header",
      "content": "1Ô∏è‚É£ Turn on 'Render as Block'"
    },
    {
      "type": "checkbox",
      "id": "custom_display",
      "label": "Render as Block",
      "default": false
    },
    {
      "type": "header",
      "content": "2Ô∏è‚É£ Go to Product Blocks"
    },
    {
      "type": "header",
      "content": "3Ô∏è‚É£ Add a Custom Liquid block"
    },
    {
      "type": "header",
      "content": "4Ô∏è‚É£ Paste this code:",
      "info": "<div id='s-price-layout-1'></div>"
    },








    {
      "type": "header",
      "content": "Layout"
    },








    {
      "type": "select",
      "id": "custom_width",
      "label": "Section",
      "options": [
        {
          "value": "full_width",
          "label": "Full width"
        },
        {
          "value": "max-content",
          "label": "Auto width"
        },
        {
          "value": "max_width",
          "label": "Custom width"
        }
      ],
      "default": "max_width"
    },
    {
      "type": "number",
      "id": "container_max_width",
      "label": "Width desktop",
      "default": 440,
      "visible_if": "{{ section.settings.custom_width == 'max_width'}}"
    },
    {
      "type": "header",
      "content": "üìù Content Settings"
    },
    {
      "type": "product",
      "id": "fallback_product",
      "label": "Fallback product (for non-product pages)"
    },
    {
      "type": "text",
      "id": "fallback_price_text",
      "label": "Fallback price text",
      "default": "‚Ç¨0,00"
    },
    {
      "type": "header",
      "content": "Colors"
    },
    {
      "type": "color",
      "id": "container_bg",
      "label": "Background color",
      "default": "#ffffff"
    },    
    {
      "type": "color",
      "id": "sale_color",
      "label": "Sale price color",
      "default": "#e53935"
    },
    {
      "type": "color",
      "id": "single_price_color",
      "label": "Single price color (no sale)",
      "default": "#000000"
    },
    {
      "type": "color",
      "id": "reg_color",
      "label": "Regular price color",
      "default": "#444444"
    },
    {
      "type": "color",
      "id": "badge_bg",
      "label": "Badge background",
      "default": "#00b31e"
    },
    {
      "type": "color",
      "id": "badge_text",
      "label": "Badge text color",
      "default": "#ffffff"
    },








    {
      "type": "header",
      "content": "Sale price settings desktop"
    },
    {
      "type": "range",
      "id": "price_size_d",
      "label": "Font size",
      "min": 10,
      "max": 64,
      "step": 1,
      "unit": "px",
      "default": 26
    },
    {
      "type": "range",
      "id": "sale_font_weight",
      "label": "Font weight",
      "min": 100,
      "max": 1000,
      "step": 100,
      "default": 700
    },
    {
      "type": "range",
      "id": "sale_line_height",
      "label": "Line height",
      "min": 1,
      "max": 3,
      "step": 0.1,
      "unit": "em",
      "default": 1
    },
    {
      "type": "range",
      "id": "sale_letter_spacing",
      "label": "Letter spacing",
      "min": -5,
      "max": 10,
      "step": 0.2,
      "unit": "px",
      "default": 0
    },
    {
      "type": "checkbox",
      "id": "price_position",
      "label": "Show sale price first",
      "default": true
    },
    {
      "type": "header",
      "content": "Sale price settings mobile"
    },
    {
      "type": "range",
      "id": "price_size_m",
      "label": "Font size",
      "min": 10,
      "max": 48,
      "step": 1,
      "unit": "px",
      "default": 22
    },
    {
      "type": "range",
      "id": "sale_line_height_mob",
      "label": "Line height",
      "min": 1,
      "max": 3,
      "step": 0.1,
      "unit": "em",
      "default": 1
    },
    {
      "type": "range",
      "id": "sale_letter_spacing_mob",
      "label": "Letter spacing",
      "min": -5,
      "max": 10,
      "step": 0.2,
      "unit": "px",
      "default": 0
    },
    {
      "type": "header",
      "content": "Compare price settings desktop"
    },
    {
      "type": "range",
      "id": "price_size_dc",
      "label": "Font size",
      "min": 10,
      "max": 64,
      "step": 1,
      "unit": "px",
      "default": 26
    },
    {
      "type": "range",
      "id": "compare_font_weight",
      "label": "Font weight",
      "min": 100,
      "max": 1000,
      "step": 100,
      "default": 500
    },
    {
      "type": "range",
      "id": "compare_line_height",
      "label": "Line height",
      "min": 1,
      "max": 3,
      "step": 0.1,
      "unit": "em",
      "default": 1
    },
    {
      "type": "range",
      "id": "compare_letter_spacing",
      "label": "Letter spacing",
      "min": -5,
      "max": 10,
      "step": 0.2,
      "unit": "px",
      "default": 0
    },
    {
      "type": "range",
      "id": "opacity_regular",
      "label": "Opacity",
      "min": 0,
      "max": 1,
      "step": 0.1,
      "unit": "em",
      "default": 0.8
    },  
    {
      "type": "range",
      "id": "price_line_height",
      "label": "Price group line height",
      "min": 1,
      "max": 3,
      "step": 0.1,
      "unit": "em",
      "default": 1
    },
    {
      "type": "header",
      "content": "Compare price settings mobile"
    },
    {
      "type": "range",
      "id": "price_size_dcm",
      "label": "Font size",
      "min": 10,
      "max": 48,
      "step": 1,
      "unit": "px",
      "default": 22
    },
    {
      "type": "range",
      "id": "compare_line_height_mob",
      "label": "Line height",
      "min": 1,
      "max": 3,
      "step": 0.1,
      "unit": "em",
      "default": 1
    },
    {
      "type": "range",
      "id": "compare_letter_spacing_mob",
      "label": "Letter spacing",
      "min": -5,
      "max": 10,
      "step": 0.2,
      "unit": "px",
      "default": 0
    },
    {
      "type": "header",
      "content": "Badge settings desktop"
    },
    {
      "type": "select",
      "id": "badge_mode",
      "label": "Badge mode",
      "default": "auto_amount",
      "options": [
        { "label": "Auto (Save ‚Ç¨X,XX)", "value": "auto_amount" },
        { "label": "Auto (Save %)", "value": "auto_percent" },
        { "label": "Custom text", "value": "custom" },
        { "label": "Hidden", "value": "hidden" }
      ]
    },
    {
      "type": "text",
      "id": "badge_prefix_text",
      "label": "Prefix text before amount/percent",
      "default": "SAVE",
      "info": "Only used in auto modes",
      "visible_if": "{{ section.settings.badge_mode == 'auto_amount' or section.settings.badge_mode == 'auto_percent' }}"
    },
    {
      "type": "text",
      "id": "custom_badge_text",
      "label": "Custom badge text",
      "default": "LIMITED OFFER",
      "visible_if": "{{ section.settings.badge_mode == 'custom' }}"
    },
    {
      "type": "range",
      "id": "badge_size_d",
      "label": "Font size",
      "min": 8,
      "max": 32,
      "step": 1,
      "unit": "px",
      "default": 14
    },
    {
      "type": "range",
      "id": "badge_font_weight",
      "label": "Font weight",
      "min": 100,
      "max": 1000,
      "step": 100,
      "default": 700
    },
    {
      "type": "range",
      "id": "badge_line_height",
      "label": "Line height",
      "min": 1,
      "max": 3,
      "step": 0.1,
      "unit": "em",
      "default": 1
    },
    {
      "type": "range",
      "id": "badge_letter_spacing",
      "label": "Letter spacing",
      "min": -5,
      "max": 10,
      "step": 0.2,
      "unit": "px",
      "default": 0
    },
    {
      "type": "range",
      "id": "badge_radius",
      "label": "Border radius",
      "min": 0,
      "max": 32,
      "step": 1,
      "unit": "px",
      "default": 16
    },
    {
      "type": "range",
      "id": "badge_pad_y",
      "label": "Padding top and bottom",
      "min": 2,
      "max": 20,
      "step": 1,
      "unit": "px",
      "default": 4
    },
    {
      "type": "range",
      "id": "badge_pad_x",
      "label": "Padding left and right",
      "min": 4,
      "max": 32,
      "step": 1,
      "unit": "px",
      "default": 12
    },
    {
      "type": "select",
      "id": "badge_transform",
      "label": "Text transform",
      "default": "uppercase",
      "options": [
        { "label": "None", "value": "none" },
        { "label": "Uppercase", "value": "uppercase" },
        { "label": "Lowercase", "value": "lowercase" },
        { "label": "Capitalize", "value": "capitalize" }
      ]
    },
    {
      "type": "header",
      "content": "Badge settings mobile"
    },
    {
      "type": "range",
      "id": "badge_size_m",
      "label": "Font size",
      "min": 8,
      "max": 28,
      "step": 1,
      "unit": "px",
      "default": 13
    },
    {
      "type": "range",
      "id": "badge_line_height_mob",
      "label": "Line height",
      "min": 1,
      "max": 3,
      "step": 0.1,
      "unit": "em",
      "default": 1
    },
    {
      "type": "range",
      "id": "badge_letter_spacing_mob",
      "label": "Letter spacing",
      "min": -5,
      "max": 10,
      "step": 0.2,
      "unit": "px",
      "default": 0
    },
    {
      "type": "range",
      "id": "badge_pad_y_mob",
      "label": "Padding top and bottom",
      "min": 2,
      "max": 20,
      "step": 1,
      "unit": "px",
      "default": 4
    },
    {
      "type": "range",
      "id": "badge_pad_x_mob",
      "label": "Padding left and right",
      "min": 4,
      "max": 32,
      "step": 1,
      "unit": "px",
      "default": 12
    },








    {
      "type": "header",
      "content": "Section settings desktop"
    },








    {
      "type": "range",
      "id": "container_radius",
      "label": "Border radius",
      "min": 0,
      "max": 40,
      "step": 1,
      "unit": "px",
      "default": 0
    },
    {
      "type": "range",
      "id": "pad_y",
      "label": "Padding top and bottom",
      "min": 0,
      "max": 60,
      "step": 2,
      "unit": "px",
      "default": 0
    },
    {
      "type": "range",
      "id": "pad_x",
      "label": "Padding left and right",
      "min": 0,
      "max": 60,
      "step": 2,
      "unit": "px",
      "default": 0
    },
    {
      "type": "range",
      "id": "margin_y",
      "label": "Margin top and bottom",
      "min": 0,
      "max": 80,
      "step": 2,
      "unit": "px",
      "default": 0
    },
    {
      "type": "select",
      "id": "hor_align_text",
      "label": "Alignment",
      "default": "flex-start",
      "options": [
        { "value": "flex-start", "label": "left" },
        { "value": "Center", "label": "center" },
        { "value": "flex-end", "label": "right" }
      ]
    },
    {
      "type": "select",
      "id": "align_text",
      "label": "Text alignment",
      "default": "left",
      "options": [
        { "label": "Left", "value": "left" },
        { "label": "Center", "value": "center" },
        { "label": "Right", "value": "right" }
      ]
    },
    {
      "type": "range",
      "id": "gap",
      "label": "Gap between price and badge",
      "min": 0,
      "max": 40,
      "step": 1,
      "unit": "px",
      "default": 12
    },
    {
      "type": "range",
      "id": "price_gap",
      "label": "Gap between sale and regular price",
      "min": 0,
      "max": 24,
      "step": 1,
      "unit": "px",
      "default": 8
    },
    {
      "type": "header",
      "content": "Section settings mobile"
    },
    {
      "type": "range",
      "id": "container_radius_mob",
      "label": "Border radius",
      "min": 0,
      "max": 40,
      "step": 1,
      "unit": "px",
      "default": 0
    },
    {
      "type": "range",
      "id": "pad_y_mob",
      "label": "Padding top and bottom",
      "min": 0,
      "max": 60,
      "step": 2,
      "unit": "px",
      "default": 0
    },
    {
      "type": "range",
      "id": "pad_x_mob",
      "label": "Padding left and right",
      "min": 0,
      "max": 60,
      "step": 2,
      "unit": "px",
      "default": 0
    },
    {
      "type": "range",
      "id": "margin_y_mob",
      "label": "Margin top and bottom",
      "min": 0,
      "max": 80,
      "step": 2,
      "unit": "px",
      "default": 0
    },








    {
      "type": "select",
      "id": "hor_align_text_m",
      "label": "Alignment",
      "default": "flex-start",
      "options": [
        { "value": "flex-start", "label": "left" },
        { "value": "Center", "label": "center" },
        { "value": "flex-end", "label": "right" }
      ]
    },
    {
      "type": "select",
      "id": "align_text_mob",
      "label": "Text alignemnt",
      "default": "left",
      "options": [
        { "label": "Left", "value": "left" },
        { "label": "Center", "value": "center" },
        { "label": "Right", "value": "right" }
      ]
    },
    {
      "type": "range",
      "id": "gap_mob",
      "label": "Gap between price and badge",
      "min": 0,
      "max": 40,
      "step": 1,
      "unit": "px",
      "default": 12
    },
    {
      "type": "range",
      "id": "price_gap_mob",
      "label": "Gap between sale and regular price",
      "min": 0,
      "max": 24,
      "step": 1,
      "unit": "px",
      "default": 8
    },
    {
      "type": "range",
      "id": "price_line_height_mob",
      "label": "Price group line height",
      "min": 1,
      "max": 3,
      "step": 0.1,
      "unit": "em",
      "default": 1
    }
  ],
  "presets": [
    {
      "name": "s-price-layout-1",
      "category": "Selluxe"
    }
  ]
}
{% endschema %}